<section class="section-org-edit">

    <form #patientForm="ngForm">
        <mat-list class="row">
            <app-label>Personal Information</app-label>
            <div class="row">
                <!-- User Id -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">User Id</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="text" class="form-control app-input" [(ngModel)]="userProfile.userId"
                                    name="userId" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Date -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Date</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="date" class="form-control app-input" name="date"
                                    [ngModel]="userProfile.date | date:'yyyy-MM-dd'"
                                    (ngModelChange)="userProfile.date = $event" required>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <!-- First Name -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label app-input">First Name</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="text" class="form-control app-input" name="nameF"
                                    [(ngModel)]="userProfile.firstName" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Last Name -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Last Name</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="text" class="form-control app-input" name="nameL"
                                    [(ngModel)]="userProfile.lastName" required>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Gender -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3 mt-3">
                        <div class="col-md-3">
                            <label class="label" class="app-label">Gender</label>
                        </div>
                        <div class="col-md-9">
                            <div class="form-check form-check-inline" *ngFor="let g of genderList">
                                <input class="form-check-input" type="radio" name="gender" [value]="g.id"
                                    [(ngModel)]="userProfile.gender">
                                <label class="form-check-label">{{ g.name }}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Age -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Age</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="" class="form-control app-input" name="age" required
                                    [(ngModel)]="userProfile.age">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Contact No -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Contact Number</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="cell1" class="form-control app-input" name="cell1" required maxlength="10"
                                    minlength="10" [(ngModel)]="userProfile.contactNumber" appNumberOnly>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Email -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Email</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="email" class="form-control app-input" name="email"
                                    [(ngModel)]="userProfile.email" required>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Date of Birth -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Date of Birth</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="date" class="form-control app-input" name="dateOfBirth"
                                    [(ngModel)]="userProfile.dob" required>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- Department -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Deparment</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <select class="app-single-select-dropdown w-100" name="department"
                                    [(ngModel)]="userProfile.departmentId"
                                    (ngModelChange)="filterUserTypesByDepartment(userProfile.departmentId)">
                                    <option *ngFor="let item of departmentList" [value]="item._id">{{item.name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Fathers Name -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Father's Name</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="text" class="form-control app-input" name="fatherName"
                                    [(ngModel)]="userProfile.fatherName" required>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Alternate Number-->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Alternate Number</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="cell2" class="form-control app-input" name="cell2" required maxlength="10"
                                    minlength="10" [(ngModel)]="userProfile.alternateNumber" appNumberOnly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- User Type -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">User Type</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <select class="app-single-select-dropdown w-100" name="userType"
                                    [(ngModel)]="userProfile.userType">
                                    <option *ngFor="let item of filteredUserTypeList" [value]="item.userType._id">
                                        {{item.userType.name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Designation -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label"> Designation</label>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <input type="text" class="form-control app-input" name="designation"
                                    [(ngModel)]="userProfile.designation" required>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <!-- Service Timing -->
                <label class="app-label">Service Timing</label>

                <div class="col-md-12 align-style" *ngFor="let timing of userProfile.serviceTiming; let i = index">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label class="app-label">Slot-{{i+1}}</label>
                        </div>
                        <div class="col-md-9">
                            <div class="form-group d-flex">
                                <div class="d-flex align-items-center col-md-5">
                                    <div class="input-with-dropdown">
                                        <input type="text" class="form-control app-input time-input"
                                            [(ngModel)]="timing.serviceTime" name="service_time_{{ i }}"
                                            placeholder="HH:MM">
                                        <select class="form-control app-input dropdown-select" [(ngModel)]="timing.ampm"
                                            name="ampm_{{ i }}">
                                            <option value="am">AM</option>
                                            <option value="pm">PM</option>
                                        </select>
                                    </div>
                                </div>
                                <span class="col-md-2 d-flex  align-items-center app-label">To</span>
                                <div class="d-flex align-items-center mt-2 col-md-5">
                                    <div class="input-with-dropdown">
                                        <input type="text" class="form-control app-input time-input"
                                            [(ngModel)]="timing.serviceTimeEnd" name="service_time_end_{{ i }}"
                                            placeholder="HH:MM">
                                        <select class="form-control app-input dropdown-select"
                                            [(ngModel)]="timing.ampmEnd" name="ampm_end_{{ i }}">
                                            <option value="am">AM</option>
                                            <option value="pm">PM</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-2">
                            <mat-icon class="add-icon clickable" (click)="removeServiceTiming(i)">delete</mat-icon>
                            &nbsp;&nbsp;
                            <mat-icon class="add-icon clickable" *ngIf="(i+1)==userProfile.serviceTiming.length"
                                (click)="addServiceTiming()">add_circle_outline</mat-icon>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Add Photo -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label for="exampleInputEmail1" class="app-label">Add Photo</label>
                        </div>
                        <div class="row ">
                            <div class="form-group col-md-7">
                                <input type="file" class="form-control app-input" name="addPhoto"
                                    [(ngModel)]="userProfile.addPhoto" required>
                            </div>
                            <div class="col-md-2">
                                <button class="common-button">Browse</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- upload Id Proof -->
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <div class="col-md-3">
                            <label for="exampleInputEmail1" class="app-label"> Upload Id Proof</label>
                        </div>
                        <div class="row ">
                            <div class="form-group col-md-7">
                                <input type="file" class="form-control app-input" name="uploadIdProof"
                                    [(ngModel)]="userProfile.uploadIdProof" required>
                            </div>
                            <div class="col-md-2">
                                <button class="common-button">Browse</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Address Section -->
            <app-label>Address Details</app-label>
            <div class="row">
                <app-eg-edit-address-form [(ngModel)]="userProfile.address"></app-eg-edit-address-form>
            </div>
        </mat-list>

        <div class="d-flex align-items-center justify-content-center mb-4">
            <div class="col-1">
                <button class="common-button" (click)="onSavingUserType()">{{'save'}}</button>
            </div>
            <div class="col-2">
                <button class="common-button">{{'Generate Id Card'}}</button>
            </div>
        </div>
    </form>
</section>